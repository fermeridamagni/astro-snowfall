---

import { CopyButton } from "@components/animate-ui/components/buttons/copy";
import { cn } from "@magnidev/tailwindcss-utils";

interface Props {
  code: string;
  lang?: string;
  title?: string;
  class?: string;
}

const { code, lang = "bash", title, class: className } = Astro.props;
---

<div
  class="rounded-xl overflow-hidden border border-white/10 bg-black/40 shadow-2xl backdrop-blur-md"
>
  {
    title && (
      <div class="flex items-center justify-between px-4 py-2 border-b border-white/5 bg-white/5">
        <span class="text-xs text-gray-400 font-mono">{title}</span>
        <div class="flex gap-1.5">
          <div class="w-2.5 h-2.5 rounded-full bg-red-500/20 border border-red-500/50" />
          <div class="w-2.5 h-2.5 rounded-full bg-yellow-500/20 border border-yellow-500/50" />
          <div class="w-2.5 h-2.5 rounded-full bg-green-500/20 border border-green-500/50" />
        </div>
      </div>
    )
  }
  <div class={cn("relative group", className)}>
    <CopyButton
      client:visible
      content={code}
      className="absolute top-2 right-2 p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white/70 transition-colors z-20 backdrop-blur-sm"
    />
    <div class="p-4 overflow-x-auto">
      <pre
        class="font-mono text-sm text-gray-300 leading-relaxed pr-12"><code class={`language-${lang}`}>{code.trim()}</code></pre>
    </div>
  </div>
</div>
