---
interface Props {
  code: string;
  lang?: string;
  title?: string;
}

const { code, lang = "bash", title } = Astro.props;
---

<div
  class="rounded-xl overflow-hidden border border-white/10 bg-black/40 shadow-2xl backdrop-blur-md"
>
  {
    title && (
      <div class="flex items-center justify-between px-4 py-2 border-b border-white/5 bg-white/5">
        <span class="text-xs text-gray-400 font-mono">{title}</span>
        <div class="flex gap-1.5">
          <div class="w-2.5 h-2.5 rounded-full bg-red-500/20 border border-red-500/50" />
          <div class="w-2.5 h-2.5 rounded-full bg-yellow-500/20 border border-yellow-500/50" />
          <div class="w-2.5 h-2.5 rounded-full bg-green-500/20 border border-green-500/50" />
        </div>
      </div>
    )
  }
  <div class="relative group">
    <button
      class="absolute top-2 right-2 p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white/70 transition-colors z-20 backdrop-blur-sm"
      onclick="navigator.clipboard.writeText(this.parentElement.querySelector('code').innerText); const originalContent = this.innerHTML; this.innerHTML = '<span class=\'text-xs text-green-400\'>Copied!</span>'; setTimeout(() => this.innerHTML = originalContent, 2000);"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="w-4 h-4"
        ><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path
          d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"
        ></path></svg
      >
    </button>
    <div class="p-4 overflow-x-auto">
      <pre
        class="font-mono text-sm text-gray-300 leading-relaxed pr-12"><code class={`language-${lang}`}>{code.trim()}</code></pre>
    </div>
  </div>
</div>
